% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/pro_analysis.R
\name{create_ttd_analysis}
\alias{create_ttd_analysis}
\title{Create Time-to-Deterioration Analysis}
\usage{
create_ttd_analysis(
  data,
  subject_var = "USUBJID",
  trt_var = "TRT01P",
  param_var = "PARAMCD",
  paramcd = NULL,
  value_var = "AVAL",
  base_var = "BASE",
  chg_var = "CHG",
  time_var = "ADY",
  visit_var = "AVISITN",
  threshold,
  direction = c("decrease", "increase"),
  definition = c("first", "confirmed"),
  confirmation_visits = 1,
  censor_at = NULL
)
}
\arguments{
\item{data}{Data frame with longitudinal PRO data}

\item{subject_var}{Character. Subject ID variable. Default: "USUBJID"}

\item{trt_var}{Character. Treatment variable. Default: "TRT01P"}

\item{param_var}{Character. Parameter variable. Default: "PARAMCD"}

\item{paramcd}{Character. Parameter code to analyze.
Default: NULL (uses first)}

\item{value_var}{Character. Value variable. Default: "AVAL"}

\item{base_var}{Character. Baseline value variable. Default: "BASE"}

\item{chg_var}{Character. Change from baseline variable.
Default: "CHG"}

\item{time_var}{Character. Time/day variable. Default: "ADY"}

\item{visit_var}{Character. Visit number variable.
Default: "AVISITN"}

\item{threshold}{Numeric. MCID threshold for deterioration
(positive = improvement)}

\item{direction}{Character. "decrease" if lower is worse,
"increase" if higher is worse}

\item{definition}{Character. "first" or "confirmed"
deterioration. Default: "first"}

\item{confirmation_visits}{Integer. Visits to confirm
(for definition="confirmed")}

\item{censor_at}{Numeric. Time to censor if no event.
Default: max time in data}
}
\value{
A list with components:
\describe{
\item{ttd_data}{Prepared time-to-deterioration data frame}
\item{km_fit}{Kaplan-Meier fit object from survfit}
\item{summary_table}{Summary statistics by treatment group}
\item{threshold}{MCID threshold used}
\item{direction}{Direction of deterioration}
\item{definition}{Deterioration definition used}
\item{n_subjects}{Total number of subjects}
\item{n_events}{Total number of deterioration events}
}
}
\description{
Performs time-to-deterioration (TTD) analysis for PRO endpoints.
Deterioration is defined as a decrease from baseline exceeding the MCID.
}
\examples{
\dontrun{
# Create time-to-deterioration analysis
ttd <- create_ttd_analysis(
  data = pro_data,
  threshold = 5,
  direction = "decrease"
)

# Access summary table
ttd$summary_table
}
}
